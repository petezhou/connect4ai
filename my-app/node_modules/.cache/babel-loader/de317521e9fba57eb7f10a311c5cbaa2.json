{"ast":null,"code":"import _assertThisInitialized from\"/Users/petezhou/dev/connect4/my-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _classCallCheck from\"/Users/petezhou/dev/connect4/my-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/petezhou/dev/connect4/my-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/petezhou/dev/connect4/my-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/petezhou/dev/connect4/my-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/petezhou/dev/connect4/my-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import'./App.css';import $ from'jquery';function Square(props){if(props.value===\"red\"){return React.createElement(\"button\",{className:\"square redPiece\",onClick:props.onClick,onMouseOver:props.onMouseOver},\" \");}else if(props.value===\"yellow\"){return React.createElement(\"button\",{className:\"square yellowPiece\",onClick:props.onClick,onMouseOver:props.onMouseOver},\" \");}else if(props.value===\"blue\"){return React.createElement(\"button\",{className:\"square bluePiece\",onClick:props.onClick,onMouseOver:props.onMouseOver},\" \");}else{return React.createElement(\"button\",{className:\"square\",onClick:props.onClick,onMouseOver:props.onMouseOver},\" \");}}var Board=/*#__PURE__*/function(_React$Component){_inherits(Board,_React$Component);function Board(props){var _this;_classCallCheck(this,Board);_this=_possibleConstructorReturn(this,_getPrototypeOf(Board).call(this,props));_this.state={squares:Array(6).fill(Array(7).fill(null)),redIsNext:true,hovers:Array(7).fill(\"blue\"),doneDrop:true,isPvp:props.isPvp,isAi1:props.isAi1,isAiThinking:false};return _this;}_createClass(Board,[{key:\"renderSquare\",value:function renderSquare(i,j){var _this2=this;return React.createElement(Square,{value:this.state.squares[i][j],onClick:function onClick(){return _this2.handleClick(j);},onMouseOver:function onMouseOver(){return _this2.handleHover(j);}});}},{key:\"handleClick\",value:function handleClick(col){var squares=this.state.squares.map(function(arr){return arr.slice();});if(calculateWinner(squares)||squares[0][col]!=null||!this.state.doneDrop){return;}var hoversRow=Array(7).fill(\"blue\");this.setState({hovers:hoversRow,doneDrop:false});this.handleTrickle(squares,0,col);}},{key:\"handleTrickle\",value:function handleTrickle(board,row,col){if(row<6&&board[row][col]==null){if(row!==0){board[row-1][col]=null;}board[row][col]=this.state.redIsNext?\"red\":\"yellow\";this.setState({squares:board,doneDrop:false});setTimeout(this.handleTrickle.bind(this),50,board,row+1,col);}else{// after trickle is done, we need to update states and AI\nthis.setState({isAiThinking:false});var hoversRow=Array(7).fill(\"blue\");if(this.state.isPvp){hoversRow[col]=this.state.redIsNext?\"yellow\":\"red\";}this.setState({doneDrop:true,hovers:hoversRow,redIsNext:!this.state.redIsNext});// AI time!\nif(!this.state.isPvp){if(this.state.isAi1&&this.state.redIsNext||!this.state.isAi1&&!this.state.redIsNext){this.setState({isAiThinking:true});var obj={turn:this.state.redIsNext?\"red\":\"yellow\",board:board};$.post(\"/ai\",JSON.stringify(obj),function(data){// play the move on callback\nthis.handleClick(Number(data));}.bind(this));}}}}},{key:\"renderHover\",value:function renderHover(col){var _this3=this;return React.createElement(Square,{value:this.state.hovers[col],onClick:function onClick(){return _this3.handleClick(col);},onMouseOver:function onMouseOver(){return _this3.handleHover(col);}});}},{key:\"handleHover\",value:function handleHover(col){var hoversRow=Array(7).fill(\"blue\");if(calculateWinner(this.state.squares)||this.state.isAiThinking){this.setState({hovers:hoversRow});}else{hoversRow[col]=this.state.redIsNext?\"red\":\"yellow\";this.setState({hovers:hoversRow});}}},{key:\"resetGame\",value:function resetGame(){this.setState({squares:Array(6).fill(Array(7).fill(null)),redIsNext:true,hovers:Array(7).fill(\"blue\"),doneDrop:true,isPvp:this.props.isPvp,isAi1:this.props.isAi1});}},{key:\"render\",value:function render(){var _this4=this;var status;if(this.state.doneDrop===true){var winner=calculateWinner(this.state.squares);if(winner===\"red\"){status=\"Player 1 wins!\";}else if(winner===\"yellow\"){status=\"Player 2 wins!\";}else if(winner===\"draw\"){status=\"It's a draw.\";}else{status=\"\";}}return React.createElement(\"div\",{className:\"board\"},React.createElement(\"div\",{className:\"board-row\"},this.renderHover(0),this.renderHover(1),this.renderHover(2),this.renderHover(3),this.renderHover(4),this.renderHover(5),this.renderHover(6)),React.createElement(\"div\",{className:\"board-row\"},this.renderSquare(0,0),this.renderSquare(0,1),this.renderSquare(0,2),this.renderSquare(0,3),this.renderSquare(0,4),this.renderSquare(0,5),this.renderSquare(0,6)),React.createElement(\"div\",{className:\"board-row\"},this.renderSquare(1,0),this.renderSquare(1,1),this.renderSquare(1,2),this.renderSquare(1,3),this.renderSquare(1,4),this.renderSquare(1,5),this.renderSquare(1,6)),React.createElement(\"div\",{className:\"board-row\"},this.renderSquare(2,0),this.renderSquare(2,1),this.renderSquare(2,2),this.renderSquare(2,3),this.renderSquare(2,4),this.renderSquare(2,5),this.renderSquare(2,6)),React.createElement(\"div\",{className:\"board-row\"},this.renderSquare(3,0),this.renderSquare(3,1),this.renderSquare(3,2),this.renderSquare(3,3),this.renderSquare(3,4),this.renderSquare(3,5),this.renderSquare(3,6)),React.createElement(\"div\",{className:\"board-row\"},this.renderSquare(4,0),this.renderSquare(4,1),this.renderSquare(4,2),this.renderSquare(4,3),this.renderSquare(4,4),this.renderSquare(4,5),this.renderSquare(4,6)),React.createElement(\"div\",{className:\"board-row\"},this.renderSquare(5,0),this.renderSquare(5,1),this.renderSquare(5,2),this.renderSquare(5,3),this.renderSquare(5,4),this.renderSquare(5,5),this.renderSquare(5,6)),React.createElement(\"button\",{id:\"restart\",onClick:function onClick(){return _this4.resetGame();}},\"Restart\"),React.createElement(\"h3\",null,status));}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props,state){// basically restart the game on change\nif(props.isPvp!==state.isPvp||props.isAi1!==state.isAi1){return{squares:Array(6).fill(Array(7).fill(null)),redIsNext:true,hovers:Array(7).fill(\"blue\"),doneDrop:true,isPvp:props.isPvp,isAi1:props.isAi1};}return null;}}]);return Board;}(React.Component);var GameType=/*#__PURE__*/function(_React$Component2){_inherits(GameType,_React$Component2);function GameType(props){var _this5;_classCallCheck(this,GameType);_this5=_possibleConstructorReturn(this,_getPrototypeOf(GameType).call(this,props));_this5.handleChange=_this5.handleChange.bind(_assertThisInitialized(_this5));return _this5;}_createClass(GameType,[{key:\"handleChange\",value:function handleChange(event){this.props.onTypeChange(event.target.value);}},{key:\"render\",value:function render(){return React.createElement(\"form\",null,React.createElement(\"label\",null,\"Game Mode: \\xA0\",React.createElement(\"select\",{value:this.props.option,onChange:this.handleChange},React.createElement(\"option\",{value:\"pvp\"},\"Player vs. Player\"),React.createElement(\"option\",{value:\"aip1\"},\"AI as Player 1\"),React.createElement(\"option\",{value:\"aip2\"},\"AI as Player 2\"))));}}]);return GameType;}(React.Component);var App=/*#__PURE__*/function(_React$Component3){_inherits(App,_React$Component3);// who starts etc. handled here and passed as props to Board\nfunction App(props){var _this6;_classCallCheck(this,App);_this6=_possibleConstructorReturn(this,_getPrototypeOf(App).call(this,props));_this6.state={mode:\"pvp\",isPvp:true,isAi1:false};_this6.handleTypeChange=_this6.handleTypeChange.bind(_assertThisInitialized(_this6));return _this6;}_createClass(App,[{key:\"handleTypeChange\",value:function handleTypeChange(selected){var thePvp;var theAi1;if(selected===\"pvp\"){thePvp=true;theAi1=false;}else if(selected===\"aip1\"){thePvp=false;theAi1=true;}else if(selected===\"aip1\"){thePvp=false;theAi1=false;}this.setState({mode:selected,isPvp:thePvp,isAi1:theAi1});}},{key:\"render\",value:function render(){return React.createElement(\"div\",{className:\"App\"},React.createElement(\"h1\",null,\"Connect 4\"),React.createElement(GameType,{option:this.state.mode,onTypeChange:this.handleTypeChange}),React.createElement(Board,{isPvp:this.state.isPvp,isAi1:this.state.isAi1}));}}]);return App;}(React.Component);function calculateWinner(board){// check columns\nfor(var r=3;r<6;r++){for(var c=0;c<7;c++){if(board[r][c]){if(board[r][c]===board[r-1][c]&&board[r][c]===board[r-2][c]&&board[r][c]===board[r-3][c]){return board[r][c];}}}}// check rows\nfor(var _r=0;_r<6;_r++){for(var _c=0;_c<4;_c++){if(board[_r][_c]){if(board[_r][_c]===board[_r][_c+1]&&board[_r][_c]===board[_r][_c+2]&&board[_r][_c]===board[_r][_c+3]){return board[_r][_c];}}}}// diagonal right\nfor(var _r2=3;_r2<6;_r2++){for(var _c2=0;_c2<4;_c2++){if(board[_r2][_c2]){if(board[_r2][_c2]===board[_r2-1][_c2+1]&&board[_r2][_c2]===board[_r2-2][_c2+2]&&board[_r2][_c2]===board[_r2-3][_c2+3]){return board[_r2][_c2];}}}}// diagonal left\nfor(var _r3=3;_r3<6;_r3++){for(var _c3=3;_c3<7;_c3++){if(board[_r3][_c3]){if(board[_r3][_c3]===board[_r3-1][_c3-1]&&board[_r3][_c3]===board[_r3-2][_c3-2]&&board[_r3][_c3]===board[_r3-3][_c3-3]){return board[_r3][_c3];}}}}// draw\nfor(var _r4=0;_r4<6;_r4++){for(var _c4=0;_c4<7;_c4++){if(!board[_r4][_c4]){return null;}}}return\"draw\";}export default App;","map":{"version":3,"sources":["/Users/petezhou/dev/connect4/my-app/src/App.js"],"names":["React","$","Square","props","value","onClick","onMouseOver","Board","state","squares","Array","fill","redIsNext","hovers","doneDrop","isPvp","isAi1","isAiThinking","i","j","handleClick","handleHover","col","map","arr","slice","calculateWinner","hoversRow","setState","handleTrickle","board","row","setTimeout","bind","obj","turn","post","JSON","stringify","data","Number","status","winner","renderHover","renderSquare","resetGame","Component","GameType","handleChange","event","onTypeChange","target","option","App","mode","handleTypeChange","selected","thePvp","theAi1","r","c"],"mappings":"kuBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAO,WAAP,CACA,MAAOC,CAAAA,CAAP,KAAc,QAAd,CAGA,QAASC,CAAAA,MAAT,CAAgBC,KAAhB,CAAuB,CACnB,GAAIA,KAAK,CAACC,KAAN,GAAgB,KAApB,CAA0B,CACtB,MAAO,+BAAQ,SAAS,CAAC,iBAAlB,CAAoC,OAAO,CAAED,KAAK,CAACE,OAAnD,CAA4D,WAAW,CAAEF,KAAK,CAACG,WAA/E,MAAP,CACH,CAFD,IAEO,IAAIH,KAAK,CAACC,KAAN,GAAgB,QAApB,CAA8B,CACjC,MAAO,+BAAQ,SAAS,CAAC,oBAAlB,CAAuC,OAAO,CAAED,KAAK,CAACE,OAAtD,CAA+D,WAAW,CAAEF,KAAK,CAACG,WAAlF,MAAP,CACH,CAFM,IAEA,IAAIH,KAAK,CAACC,KAAN,GAAgB,MAApB,CAA4B,CAC/B,MAAO,+BAAQ,SAAS,CAAC,kBAAlB,CAAqC,OAAO,CAAED,KAAK,CAACE,OAApD,CAA6D,WAAW,CAAEF,KAAK,CAACG,WAAhF,MAAP,CACH,CAFM,IAGF,CACD,MAAO,+BAAQ,SAAS,CAAC,QAAlB,CAA2B,OAAO,CAAEH,KAAK,CAACE,OAA1C,CAAmD,WAAW,CAAEF,KAAK,CAACG,WAAtE,MAAP,CACH,CACJ,C,GAGKC,CAAAA,K,2EACF,eAAYJ,KAAZ,CAAmB,uCACf,uEAAMA,KAAN,GACA,MAAKK,KAAL,CAAa,CACTC,OAAO,CAAEC,KAAK,CAAC,CAAD,CAAL,CAASC,IAAT,CAAcD,KAAK,CAAC,CAAD,CAAL,CAASC,IAAT,CAAc,IAAd,CAAd,CADA,CAETC,SAAS,CAAE,IAFF,CAGTC,MAAM,CAAEH,KAAK,CAAC,CAAD,CAAL,CAASC,IAAT,CAAc,MAAd,CAHC,CAITG,QAAQ,CAAE,IAJD,CAKTC,KAAK,CAAEZ,KAAK,CAACY,KALJ,CAMTC,KAAK,CAAEb,KAAK,CAACa,KANJ,CAOTC,YAAY,CAAE,KAPL,CAAb,CAFe,aAWlB,C,oEAEYC,C,CAAGC,C,CAAG,iBACf,MAAO,qBAAC,MAAD,EAAQ,KAAK,CAAE,KAAKX,KAAL,CAAWC,OAAX,CAAmBS,CAAnB,EAAsBC,CAAtB,CAAf,CAAyC,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACC,WAAL,CAAiBD,CAAjB,CAAN,EAAlD,CAA6E,WAAW,CAAE,6BAAM,CAAA,MAAI,CAACE,WAAL,CAAiBF,CAAjB,CAAN,EAA1F,EAAP,CACH,C,gDAEWG,G,CAAK,CACb,GAAMb,CAAAA,OAAO,CAAG,KAAKD,KAAL,CAAWC,OAAX,CAAmBc,GAAnB,CAAuB,SAACC,GAAD,QAASA,CAAAA,GAAG,CAACC,KAAJ,EAAT,EAAvB,CAAhB,CACA,GAAIC,eAAe,CAACjB,OAAD,CAAf,EAA4BA,OAAO,CAAC,CAAD,CAAP,CAAWa,GAAX,GAAmB,IAA/C,EAAuD,CAAC,KAAKd,KAAL,CAAWM,QAAvE,CAAgF,CAC5E,OACH,CACD,GAAMa,CAAAA,SAAS,CAAGjB,KAAK,CAAC,CAAD,CAAL,CAASC,IAAT,CAAc,MAAd,CAAlB,CACA,KAAKiB,QAAL,CAAc,CACNf,MAAM,CAAEc,SADF,CAENb,QAAQ,CAAE,KAFJ,CAAd,EAIA,KAAKe,aAAL,CAAmBpB,OAAnB,CAA4B,CAA5B,CAA+Ba,GAA/B,EACH,C,oDAEaQ,K,CAAOC,G,CAAKT,G,CAAK,CAC3B,GAAIS,GAAG,CAAG,CAAN,EAAWD,KAAK,CAACC,GAAD,CAAL,CAAWT,GAAX,GAAmB,IAAlC,CAAwC,CACpC,GAAIS,GAAG,GAAK,CAAZ,CAAe,CACXD,KAAK,CAACC,GAAG,CAAG,CAAP,CAAL,CAAeT,GAAf,EAAsB,IAAtB,CACH,CACDQ,KAAK,CAACC,GAAD,CAAL,CAAWT,GAAX,EAAkB,KAAKd,KAAL,CAAWI,SAAX,CAAuB,KAAvB,CAA+B,QAAjD,CACA,KAAKgB,QAAL,CAAc,CACVnB,OAAO,CAAEqB,KADC,CAEVhB,QAAQ,CAAE,KAFA,CAAd,EAIAkB,UAAU,CAAC,KAAKH,aAAL,CAAmBI,IAAnB,CAAwB,IAAxB,CAAD,CAAgC,EAAhC,CAAoCH,KAApC,CAA2CC,GAAG,CAAG,CAAjD,CAAoDT,GAApD,CAAV,CACH,CAVD,IAUO,CACH;AACA,KAAKM,QAAL,CAAc,CAAEX,YAAY,CAAE,KAAhB,CAAd,EACA,GAAMU,CAAAA,SAAS,CAAGjB,KAAK,CAAC,CAAD,CAAL,CAASC,IAAT,CAAc,MAAd,CAAlB,CACA,GAAI,KAAKH,KAAL,CAAWO,KAAf,CAAsB,CAClBY,SAAS,CAACL,GAAD,CAAT,CAAiB,KAAKd,KAAL,CAAWI,SAAX,CAAuB,QAAvB,CAAkC,KAAnD,CACH,CACD,KAAKgB,QAAL,CAAc,CACVd,QAAQ,CAAE,IADA,CAEVD,MAAM,CAAEc,SAFE,CAGVf,SAAS,CAAE,CAAC,KAAKJ,KAAL,CAAWI,SAHb,CAAd,EAMA;AACA,GAAI,CAAC,KAAKJ,KAAL,CAAWO,KAAhB,CAAwB,CACpB,GAAI,KAAKP,KAAL,CAAWQ,KAAX,EAAoB,KAAKR,KAAL,CAAWI,SAA/B,EAA4C,CAAC,KAAKJ,KAAL,CAAWQ,KAAZ,EAAqB,CAAC,KAAKR,KAAL,CAAWI,SAAjF,CAA2F,CACvF,KAAKgB,QAAL,CAAc,CAAEX,YAAY,CAAE,IAAhB,CAAd,EACA,GAAMiB,CAAAA,GAAG,CAAG,CACRC,IAAI,CAAG,KAAK3B,KAAL,CAAWI,SAAX,CAAuB,KAAvB,CAA+B,QAD9B,CAERkB,KAAK,CAAGA,KAFA,CAAZ,CAIA7B,CAAC,CAACmC,IAAF,CAAO,KAAP,CAAcC,IAAI,CAACC,SAAL,CAAeJ,GAAf,CAAd,CAAqC,SAAUK,IAAV,CAAgB,CACjD;AACA,KAAKnB,WAAL,CAAiBoB,MAAM,CAACD,IAAD,CAAvB,EACH,CAHmC,CAGjCN,IAHiC,CAG5B,IAH4B,CAApC,EAIH,CACJ,CACJ,CACJ,C,gDAEWX,G,CAAK,iBACb,MAAO,qBAAC,MAAD,EAAQ,KAAK,CAAE,KAAKd,KAAL,CAAWK,MAAX,CAAkBS,GAAlB,CAAf,CAAuC,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACF,WAAL,CAAiBE,GAAjB,CAAN,EAAhD,CAA6E,WAAW,CAAE,6BAAM,CAAA,MAAI,CAACD,WAAL,CAAiBC,GAAjB,CAAN,EAA1F,EAAP,CACH,C,gDAEWA,G,CAAK,CACb,GAAMK,CAAAA,SAAS,CAAGjB,KAAK,CAAC,CAAD,CAAL,CAASC,IAAT,CAAc,MAAd,CAAlB,CACA,GAAIe,eAAe,CAAC,KAAKlB,KAAL,CAAWC,OAAZ,CAAf,EAAuC,KAAKD,KAAL,CAAWS,YAAtD,CAAoE,CAChE,KAAKW,QAAL,CAAc,CACVf,MAAM,CAAEc,SADE,CAAd,EAGH,CAJD,IAIO,CACHA,SAAS,CAACL,GAAD,CAAT,CAAiB,KAAKd,KAAL,CAAWI,SAAX,CAAuB,KAAvB,CAA+B,QAAhD,CACA,KAAKgB,QAAL,CAAc,CACVf,MAAM,CAAEc,SADE,CAAd,EAGH,CACJ,C,6CAEU,CACP,KAAKC,QAAL,CAAc,CACVnB,OAAO,CAAEC,KAAK,CAAC,CAAD,CAAL,CAASC,IAAT,CAAcD,KAAK,CAAC,CAAD,CAAL,CAASC,IAAT,CAAc,IAAd,CAAd,CADC,CAEVC,SAAS,CAAE,IAFD,CAGVC,MAAM,CAAEH,KAAK,CAAC,CAAD,CAAL,CAASC,IAAT,CAAc,MAAd,CAHE,CAIVG,QAAQ,CAAE,IAJA,CAKVC,KAAK,CAAE,KAAKZ,KAAL,CAAWY,KALR,CAMVC,KAAK,CAAE,KAAKb,KAAL,CAAWa,KANR,CAAd,EAQH,C,uCAiBQ,iBACL,GAAIyB,CAAAA,MAAJ,CACA,GAAI,KAAKjC,KAAL,CAAWM,QAAX,GAAwB,IAA5B,CAAiC,CAC7B,GAAM4B,CAAAA,MAAM,CAAGhB,eAAe,CAAC,KAAKlB,KAAL,CAAWC,OAAZ,CAA9B,CACA,GAAIiC,MAAM,GAAK,KAAf,CAAsB,CAClBD,MAAM,CAAG,gBAAT,CACH,CAFD,IAEO,IAAIC,MAAM,GAAK,QAAf,CAAyB,CAC5BD,MAAM,CAAG,gBAAT,CACH,CAFM,IAEA,IAAIC,MAAM,GAAK,MAAf,CAAuB,CAC1BD,MAAM,CAAG,cAAT,CACH,CAFM,IAEA,CACHA,MAAM,CAAG,EAAT,CACH,CACJ,CAED,MACI,4BAAK,SAAS,CAAC,OAAf,EACI,2BAAK,SAAS,CAAC,WAAf,EACK,KAAKE,WAAL,CAAiB,CAAjB,CADL,CAEK,KAAKA,WAAL,CAAiB,CAAjB,CAFL,CAGK,KAAKA,WAAL,CAAiB,CAAjB,CAHL,CAIK,KAAKA,WAAL,CAAiB,CAAjB,CAJL,CAKK,KAAKA,WAAL,CAAiB,CAAjB,CALL,CAMK,KAAKA,WAAL,CAAiB,CAAjB,CANL,CAOK,KAAKA,WAAL,CAAiB,CAAjB,CAPL,CADJ,CAUI,2BAAK,SAAS,CAAC,WAAf,EACK,KAAKC,YAAL,CAAkB,CAAlB,CAAqB,CAArB,CADL,CAEK,KAAKA,YAAL,CAAkB,CAAlB,CAAqB,CAArB,CAFL,CAGK,KAAKA,YAAL,CAAkB,CAAlB,CAAqB,CAArB,CAHL,CAIK,KAAKA,YAAL,CAAkB,CAAlB,CAAqB,CAArB,CAJL,CAKK,KAAKA,YAAL,CAAkB,CAAlB,CAAqB,CAArB,CALL,CAMK,KAAKA,YAAL,CAAkB,CAAlB,CAAqB,CAArB,CANL,CAOK,KAAKA,YAAL,CAAkB,CAAlB,CAAqB,CAArB,CAPL,CAVJ,CAmBI,2BAAK,SAAS,CAAC,WAAf,EACK,KAAKA,YAAL,CAAkB,CAAlB,CAAqB,CAArB,CADL,CAEK,KAAKA,YAAL,CAAkB,CAAlB,CAAqB,CAArB,CAFL,CAGK,KAAKA,YAAL,CAAkB,CAAlB,CAAqB,CAArB,CAHL,CAIK,KAAKA,YAAL,CAAkB,CAAlB,CAAqB,CAArB,CAJL,CAKK,KAAKA,YAAL,CAAkB,CAAlB,CAAqB,CAArB,CALL,CAMK,KAAKA,YAAL,CAAkB,CAAlB,CAAqB,CAArB,CANL,CAOK,KAAKA,YAAL,CAAkB,CAAlB,CAAqB,CAArB,CAPL,CAnBJ,CA4BI,2BAAK,SAAS,CAAC,WAAf,EACK,KAAKA,YAAL,CAAkB,CAAlB,CAAqB,CAArB,CADL,CAEK,KAAKA,YAAL,CAAkB,CAAlB,CAAqB,CAArB,CAFL,CAGK,KAAKA,YAAL,CAAkB,CAAlB,CAAqB,CAArB,CAHL,CAIK,KAAKA,YAAL,CAAkB,CAAlB,CAAqB,CAArB,CAJL,CAKK,KAAKA,YAAL,CAAkB,CAAlB,CAAqB,CAArB,CALL,CAMK,KAAKA,YAAL,CAAkB,CAAlB,CAAqB,CAArB,CANL,CAOK,KAAKA,YAAL,CAAkB,CAAlB,CAAqB,CAArB,CAPL,CA5BJ,CAqCI,2BAAK,SAAS,CAAC,WAAf,EACK,KAAKA,YAAL,CAAkB,CAAlB,CAAqB,CAArB,CADL,CAEK,KAAKA,YAAL,CAAkB,CAAlB,CAAqB,CAArB,CAFL,CAGK,KAAKA,YAAL,CAAkB,CAAlB,CAAqB,CAArB,CAHL,CAIK,KAAKA,YAAL,CAAkB,CAAlB,CAAqB,CAArB,CAJL,CAKK,KAAKA,YAAL,CAAkB,CAAlB,CAAqB,CAArB,CALL,CAMK,KAAKA,YAAL,CAAkB,CAAlB,CAAqB,CAArB,CANL,CAOK,KAAKA,YAAL,CAAkB,CAAlB,CAAqB,CAArB,CAPL,CArCJ,CA8CI,2BAAK,SAAS,CAAC,WAAf,EACK,KAAKA,YAAL,CAAkB,CAAlB,CAAqB,CAArB,CADL,CAEK,KAAKA,YAAL,CAAkB,CAAlB,CAAqB,CAArB,CAFL,CAGK,KAAKA,YAAL,CAAkB,CAAlB,CAAqB,CAArB,CAHL,CAIK,KAAKA,YAAL,CAAkB,CAAlB,CAAqB,CAArB,CAJL,CAKK,KAAKA,YAAL,CAAkB,CAAlB,CAAqB,CAArB,CALL,CAMK,KAAKA,YAAL,CAAkB,CAAlB,CAAqB,CAArB,CANL,CAOK,KAAKA,YAAL,CAAkB,CAAlB,CAAqB,CAArB,CAPL,CA9CJ,CAuDI,2BAAK,SAAS,CAAC,WAAf,EACK,KAAKA,YAAL,CAAkB,CAAlB,CAAqB,CAArB,CADL,CAEK,KAAKA,YAAL,CAAkB,CAAlB,CAAqB,CAArB,CAFL,CAGK,KAAKA,YAAL,CAAkB,CAAlB,CAAqB,CAArB,CAHL,CAIK,KAAKA,YAAL,CAAkB,CAAlB,CAAqB,CAArB,CAJL,CAKK,KAAKA,YAAL,CAAkB,CAAlB,CAAqB,CAArB,CALL,CAMK,KAAKA,YAAL,CAAkB,CAAlB,CAAqB,CAArB,CANL,CAOK,KAAKA,YAAL,CAAkB,CAAlB,CAAqB,CAArB,CAPL,CAvDJ,CAgEI,8BAAQ,EAAE,CAAC,SAAX,CAAqB,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACC,SAAL,EAAN,EAA9B,YAhEJ,CAiEI,8BAAKJ,MAAL,CAjEJ,CADJ,CAqEH,C,4EAnG+BtC,K,CAAOK,K,CAAM,CACzC;AACA,GAAIL,KAAK,CAACY,KAAN,GAAgBP,KAAK,CAACO,KAAtB,EAA+BZ,KAAK,CAACa,KAAN,GAAgBR,KAAK,CAACQ,KAAzD,CAA+D,CAC3D,MAAO,CACHP,OAAO,CAAEC,KAAK,CAAC,CAAD,CAAL,CAASC,IAAT,CAAcD,KAAK,CAAC,CAAD,CAAL,CAASC,IAAT,CAAc,IAAd,CAAd,CADN,CAEHC,SAAS,CAAE,IAFR,CAGHC,MAAM,CAAEH,KAAK,CAAC,CAAD,CAAL,CAASC,IAAT,CAAc,MAAd,CAHL,CAIHG,QAAQ,CAAE,IAJP,CAKHC,KAAK,CAAEZ,KAAK,CAACY,KALV,CAMHC,KAAK,CAAEb,KAAK,CAACa,KANV,CAAP,CAQH,CACD,MAAO,KAAP,CACH,C,mBAlHehB,KAAK,CAAC8C,S,KA4MpBC,CAAAA,Q,gFACF,kBAAY5C,KAAZ,CAAmB,2CACf,2EAAMA,KAAN,GACA,OAAK6C,YAAL,CAAoB,OAAKA,YAAL,CAAkBf,IAAlB,gCAApB,CAFe,cAGlB,C,uEAEYgB,K,CAAO,CAChB,KAAK9C,KAAL,CAAW+C,YAAX,CAAwBD,KAAK,CAACE,MAAN,CAAa/C,KAArC,EACH,C,uCAEQ,CACL,MACI,iCACI,mDAEI,8BAAQ,KAAK,CAAE,KAAKD,KAAL,CAAWiD,MAA1B,CAAkC,QAAQ,CAAE,KAAKJ,YAAjD,EACI,8BAAQ,KAAK,CAAC,KAAd,sBADJ,CAEI,8BAAQ,KAAK,CAAC,MAAd,mBAFJ,CAGI,8BAAQ,KAAK,CAAC,MAAd,mBAHJ,CAFJ,CADJ,CADJ,CAYH,C,sBAvBkBhD,KAAK,CAAC8C,S,KA2BvBO,CAAAA,G,2EACF;AACA,aAAYlD,KAAZ,CAAkB,sCACd,sEAAMA,KAAN,GACA,OAAKK,KAAL,CAAa,CACT8C,IAAI,CAAE,KADG,CAETvC,KAAK,CAAE,IAFE,CAGTC,KAAK,CAAE,KAHE,CAAb,CAKA,OAAKuC,gBAAL,CAAwB,OAAKA,gBAAL,CAAsBtB,IAAtB,gCAAxB,CAPc,cAQjB,C,0EAEgBuB,Q,CAAU,CACvB,GAAIC,CAAAA,MAAJ,CACA,GAAIC,CAAAA,MAAJ,CACA,GAAIF,QAAQ,GAAK,KAAjB,CAAwB,CACpBC,MAAM,CAAG,IAAT,CACAC,MAAM,CAAG,KAAT,CACH,CAHD,IAGO,IAAIF,QAAQ,GAAK,MAAjB,CAAyB,CAC5BC,MAAM,CAAG,KAAT,CACAC,MAAM,CAAG,IAAT,CACH,CAHM,IAGA,IAAIF,QAAQ,GAAK,MAAjB,CAAyB,CAC5BC,MAAM,CAAG,KAAT,CACAC,MAAM,CAAG,KAAT,CACH,CACD,KAAK9B,QAAL,CAAc,CACV0B,IAAI,CAAEE,QADI,CAEVzC,KAAK,CAAE0C,MAFG,CAGVzC,KAAK,CAAE0C,MAHG,CAAd,EAKH,C,uCAEQ,CACL,MACI,4BAAK,SAAS,CAAC,KAAf,EACI,0CADJ,CAEI,oBAAC,QAAD,EAAU,MAAM,CAAE,KAAKlD,KAAL,CAAW8C,IAA7B,CAAmC,YAAY,CAAE,KAAKC,gBAAtD,EAFJ,CAGI,oBAAC,KAAD,EAAO,KAAK,CAAE,KAAK/C,KAAL,CAAWO,KAAzB,CAAgC,KAAK,CAAE,KAAKP,KAAL,CAAWQ,KAAlD,EAHJ,CADJ,CAOH,C,iBAxCahB,KAAK,CAAC8C,S,EAgDxB,QAASpB,CAAAA,eAAT,CAAyBI,KAAzB,CAAgC,CAC5B;AACA,IAAK,GAAI6B,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAG,CAApB,CAAuBA,CAAC,EAAxB,CAA4B,CACxB,IAAK,GAAIC,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAG,CAApB,CAAuBA,CAAC,EAAxB,CAA4B,CACxB,GAAI9B,KAAK,CAAC6B,CAAD,CAAL,CAASC,CAAT,CAAJ,CAAiB,CACb,GAAI9B,KAAK,CAAC6B,CAAD,CAAL,CAASC,CAAT,IAAgB9B,KAAK,CAAC6B,CAAC,CAAG,CAAL,CAAL,CAAaC,CAAb,CAAhB,EACA9B,KAAK,CAAC6B,CAAD,CAAL,CAASC,CAAT,IAAgB9B,KAAK,CAAC6B,CAAC,CAAG,CAAL,CAAL,CAAaC,CAAb,CADhB,EAEA9B,KAAK,CAAC6B,CAAD,CAAL,CAASC,CAAT,IAAgB9B,KAAK,CAAC6B,CAAC,CAAG,CAAL,CAAL,CAAaC,CAAb,CAFpB,CAEqC,CACjC,MAAO9B,CAAAA,KAAK,CAAC6B,CAAD,CAAL,CAASC,CAAT,CAAP,CACH,CACJ,CACJ,CACJ,CACD;AACA,IAAK,GAAID,CAAAA,EAAC,CAAG,CAAb,CAAgBA,EAAC,CAAG,CAApB,CAAuBA,EAAC,EAAxB,CAA4B,CACxB,IAAK,GAAIC,CAAAA,EAAC,CAAG,CAAb,CAAgBA,EAAC,CAAG,CAApB,CAAuBA,EAAC,EAAxB,CAA4B,CACxB,GAAI9B,KAAK,CAAC6B,EAAD,CAAL,CAASC,EAAT,CAAJ,CAAiB,CACb,GAAI9B,KAAK,CAAC6B,EAAD,CAAL,CAASC,EAAT,IAAgB9B,KAAK,CAAC6B,EAAD,CAAL,CAASC,EAAC,CAAG,CAAb,CAAhB,EACA9B,KAAK,CAAC6B,EAAD,CAAL,CAASC,EAAT,IAAgB9B,KAAK,CAAC6B,EAAD,CAAL,CAASC,EAAC,CAAG,CAAb,CADhB,EAEA9B,KAAK,CAAC6B,EAAD,CAAL,CAASC,EAAT,IAAgB9B,KAAK,CAAC6B,EAAD,CAAL,CAASC,EAAC,CAAG,CAAb,CAFpB,CAEqC,CACjC,MAAO9B,CAAAA,KAAK,CAAC6B,EAAD,CAAL,CAASC,EAAT,CAAP,CACH,CACJ,CACJ,CACJ,CACD;AACA,IAAK,GAAID,CAAAA,GAAC,CAAG,CAAb,CAAgBA,GAAC,CAAG,CAApB,CAAuBA,GAAC,EAAxB,CAA4B,CAC1B,IAAK,GAAIC,CAAAA,GAAC,CAAG,CAAb,CAAgBA,GAAC,CAAG,CAApB,CAAuBA,GAAC,EAAxB,CAA4B,CAC1B,GAAI9B,KAAK,CAAC6B,GAAD,CAAL,CAASC,GAAT,CAAJ,CAAiB,CACf,GAAI9B,KAAK,CAAC6B,GAAD,CAAL,CAASC,GAAT,IAAgB9B,KAAK,CAAC6B,GAAC,CAAG,CAAL,CAAL,CAAaC,GAAC,CAAG,CAAjB,CAAhB,EACA9B,KAAK,CAAC6B,GAAD,CAAL,CAASC,GAAT,IAAgB9B,KAAK,CAAC6B,GAAC,CAAG,CAAL,CAAL,CAAaC,GAAC,CAAG,CAAjB,CADhB,EAEA9B,KAAK,CAAC6B,GAAD,CAAL,CAASC,GAAT,IAAgB9B,KAAK,CAAC6B,GAAC,CAAG,CAAL,CAAL,CAAaC,GAAC,CAAG,CAAjB,CAFpB,CAEyC,CACvC,MAAO9B,CAAAA,KAAK,CAAC6B,GAAD,CAAL,CAASC,GAAT,CAAP,CACD,CACF,CACF,CACF,CACD;AACA,IAAK,GAAID,CAAAA,GAAC,CAAG,CAAb,CAAgBA,GAAC,CAAG,CAApB,CAAuBA,GAAC,EAAxB,CAA4B,CAC1B,IAAK,GAAIC,CAAAA,GAAC,CAAG,CAAb,CAAgBA,GAAC,CAAG,CAApB,CAAuBA,GAAC,EAAxB,CAA4B,CAC1B,GAAI9B,KAAK,CAAC6B,GAAD,CAAL,CAASC,GAAT,CAAJ,CAAiB,CACf,GAAI9B,KAAK,CAAC6B,GAAD,CAAL,CAASC,GAAT,IAAgB9B,KAAK,CAAC6B,GAAC,CAAG,CAAL,CAAL,CAAaC,GAAC,CAAG,CAAjB,CAAhB,EACA9B,KAAK,CAAC6B,GAAD,CAAL,CAASC,GAAT,IAAgB9B,KAAK,CAAC6B,GAAC,CAAG,CAAL,CAAL,CAAaC,GAAC,CAAG,CAAjB,CADhB,EAEA9B,KAAK,CAAC6B,GAAD,CAAL,CAASC,GAAT,IAAgB9B,KAAK,CAAC6B,GAAC,CAAG,CAAL,CAAL,CAAaC,GAAC,CAAG,CAAjB,CAFpB,CAEyC,CACvC,MAAO9B,CAAAA,KAAK,CAAC6B,GAAD,CAAL,CAASC,GAAT,CAAP,CACD,CACF,CACF,CACF,CACD;AACA,IAAK,GAAID,CAAAA,GAAC,CAAG,CAAb,CAAgBA,GAAC,CAAG,CAApB,CAAuBA,GAAC,EAAxB,CAA4B,CACxB,IAAK,GAAIC,CAAAA,GAAC,CAAG,CAAb,CAAgBA,GAAC,CAAG,CAApB,CAAuBA,GAAC,EAAxB,CAA4B,CACxB,GAAI,CAAC9B,KAAK,CAAC6B,GAAD,CAAL,CAASC,GAAT,CAAL,CAAiB,CACb,MAAO,KAAP,CACH,CACJ,CACJ,CACD,MAAO,MAAP,CACH,CAGD,cAAeP,CAAAA,GAAf","sourcesContent":["import React from 'react';\nimport './App.css';\nimport $ from 'jquery'\n\n\nfunction Square(props) {\n    if (props.value === \"red\"){\n        return <button className=\"square redPiece\" onClick={props.onClick} onMouseOver={props.onMouseOver}> </button>;\n    } else if (props.value === \"yellow\") {\n        return <button className=\"square yellowPiece\" onClick={props.onClick} onMouseOver={props.onMouseOver}> </button>;\n    } else if (props.value === \"blue\") {\n        return <button className=\"square bluePiece\" onClick={props.onClick} onMouseOver={props.onMouseOver}> </button>;\n    }\n    else {\n        return <button className=\"square\" onClick={props.onClick} onMouseOver={props.onMouseOver}> </button>;\n    }\n}\n\n\nclass Board extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            squares: Array(6).fill(Array(7).fill(null)),\n            redIsNext: true,\n            hovers: Array(7).fill(\"blue\"),\n            doneDrop: true,\n            isPvp: props.isPvp,\n            isAi1: props.isAi1,\n            isAiThinking: false\n        };\n    }\n\n    renderSquare(i, j) {\n        return <Square value={this.state.squares[i][j]} onClick={() => this.handleClick(j)} onMouseOver={() => this.handleHover(j)} />\n    }\n\n    handleClick(col) {\n        const squares = this.state.squares.map((arr) => arr.slice());\n        if (calculateWinner(squares) || squares[0][col] != null || !this.state.doneDrop){\n            return;\n        }\n        const hoversRow = Array(7).fill(\"blue\");\n        this.setState({\n                hovers: hoversRow,\n                doneDrop: false\n            });\n        this.handleTrickle(squares, 0, col);\n    }\n\n    handleTrickle(board, row, col) {\n        if (row < 6 && board[row][col] == null) {\n            if (row !== 0) {\n                board[row - 1][col] = null;\n            }\n            board[row][col] = this.state.redIsNext ? \"red\" : \"yellow\";\n            this.setState({\n                squares: board,\n                doneDrop: false\n            });\n            setTimeout(this.handleTrickle.bind(this), 50, board, row + 1, col);\n        } else {\n            // after trickle is done, we need to update states and AI\n            this.setState({ isAiThinking: false });\n            const hoversRow = Array(7).fill(\"blue\");\n            if (this.state.isPvp) {\n                hoversRow[col] = this.state.redIsNext ? \"yellow\" : \"red\";\n            }\n            this.setState({\n                doneDrop: true,\n                hovers: hoversRow,\n                redIsNext: !this.state.redIsNext\n            });\n\n            // AI time!\n            if (!this.state.isPvp ) {\n                if (this.state.isAi1 && this.state.redIsNext || !this.state.isAi1 && !this.state.redIsNext){\n                    this.setState({ isAiThinking: true });\n                    const obj = {\n                        turn : this.state.redIsNext ? \"red\" : \"yellow\",\n                        board : board\n                    };\n                    $.post(\"/ai\", JSON.stringify(obj) , (function (data) {\n                        // play the move on callback\n                        this.handleClick(Number(data));\n                    }).bind(this));\n                }\n            }\n        }\n    }\n\n    renderHover(col) {\n        return <Square value={this.state.hovers[col]} onClick={() => this.handleClick(col)} onMouseOver={() => this.handleHover(col)} />\n    }\n\n    handleHover(col) {\n        const hoversRow = Array(7).fill(\"blue\");\n        if (calculateWinner(this.state.squares) || this.state.isAiThinking) {\n            this.setState({\n                hovers: hoversRow\n            });\n        } else {\n            hoversRow[col] = this.state.redIsNext ? \"red\" : \"yellow\";\n            this.setState({\n                hovers: hoversRow\n            });\n        }\n    }\n\n    resetGame(){\n        this.setState({\n            squares: Array(6).fill(Array(7).fill(null)),\n            redIsNext: true,\n            hovers: Array(7).fill(\"blue\"),\n            doneDrop: true,\n            isPvp: this.props.isPvp,\n            isAi1: this.props.isAi1\n        })\n    }\n\n    static getDerivedStateFromProps(props, state){\n        // basically restart the game on change\n        if (props.isPvp !== state.isPvp || props.isAi1 !== state.isAi1){\n            return {\n                squares: Array(6).fill(Array(7).fill(null)),\n                redIsNext: true,\n                hovers: Array(7).fill(\"blue\"),\n                doneDrop: true,\n                isPvp: props.isPvp,\n                isAi1: props.isAi1\n            };\n        }\n        return null;\n    }\n\n    render() {\n        let status;\n        if (this.state.doneDrop === true){\n            const winner = calculateWinner(this.state.squares);\n            if (winner === \"red\") {\n                status = \"Player 1 wins!\"\n            } else if (winner === \"yellow\") {\n                status = \"Player 2 wins!\"\n            } else if (winner === \"draw\") {\n                status = \"It's a draw.\"\n            } else {\n                status = \"\"\n            }\n        }\n\n        return (\n            <div className=\"board\">\n                <div className=\"board-row\">\n                    {this.renderHover(0)}\n                    {this.renderHover(1)}\n                    {this.renderHover(2)}\n                    {this.renderHover(3)}\n                    {this.renderHover(4)}\n                    {this.renderHover(5)}\n                    {this.renderHover(6)}\n                </div>\n                <div className=\"board-row\">\n                    {this.renderSquare(0, 0)}\n                    {this.renderSquare(0, 1)}\n                    {this.renderSquare(0, 2)}\n                    {this.renderSquare(0, 3)}\n                    {this.renderSquare(0, 4)}\n                    {this.renderSquare(0, 5)}\n                    {this.renderSquare(0, 6)}\n                </div>\n                <div className=\"board-row\">\n                    {this.renderSquare(1, 0)}\n                    {this.renderSquare(1, 1)}\n                    {this.renderSquare(1, 2)}\n                    {this.renderSquare(1, 3)}\n                    {this.renderSquare(1, 4)}\n                    {this.renderSquare(1, 5)}\n                    {this.renderSquare(1, 6)}\n                </div>\n                <div className=\"board-row\">\n                    {this.renderSquare(2, 0)}\n                    {this.renderSquare(2, 1)}\n                    {this.renderSquare(2, 2)}\n                    {this.renderSquare(2, 3)}\n                    {this.renderSquare(2, 4)}\n                    {this.renderSquare(2, 5)}\n                    {this.renderSquare(2, 6)}\n                </div>\n                <div className=\"board-row\">\n                    {this.renderSquare(3, 0)}\n                    {this.renderSquare(3, 1)}\n                    {this.renderSquare(3, 2)}\n                    {this.renderSquare(3, 3)}\n                    {this.renderSquare(3, 4)}\n                    {this.renderSquare(3, 5)}\n                    {this.renderSquare(3, 6)}\n                </div>\n                <div className=\"board-row\">\n                    {this.renderSquare(4, 0)}\n                    {this.renderSquare(4, 1)}\n                    {this.renderSquare(4, 2)}\n                    {this.renderSquare(4, 3)}\n                    {this.renderSquare(4, 4)}\n                    {this.renderSquare(4, 5)}\n                    {this.renderSquare(4, 6)}\n                </div>\n                <div className=\"board-row\">\n                    {this.renderSquare(5, 0)}\n                    {this.renderSquare(5, 1)}\n                    {this.renderSquare(5, 2)}\n                    {this.renderSquare(5, 3)}\n                    {this.renderSquare(5, 4)}\n                    {this.renderSquare(5, 5)}\n                    {this.renderSquare(5, 6)}\n                </div>\n                <button id=\"restart\" onClick={() => this.resetGame()}>Restart</button>\n                <h3>{status}</h3>\n            </div>\n        );\n    }\n}\n\n\nclass GameType extends React.Component {\n    constructor(props) {\n        super(props);\n        this.handleChange = this.handleChange.bind(this);\n    }\n\n    handleChange(event) {\n        this.props.onTypeChange(event.target.value);\n    }\n\n    render() {\n        return (\n            <form>\n                <label>\n                    Game Mode: &nbsp;\n                    <select value={this.props.option} onChange={this.handleChange}>\n                        <option value=\"pvp\">Player vs. Player</option>\n                        <option value=\"aip1\">AI as Player 1</option>\n                        <option value=\"aip2\">AI as Player 2</option>\n                    </select>\n                </label>\n            </form>\n        );\n    }\n}\n\n\nclass App extends React.Component {\n    // who starts etc. handled here and passed as props to Board\n    constructor(props){\n        super(props);\n        this.state = {\n            mode: \"pvp\",\n            isPvp: true,\n            isAi1: false,\n        };\n        this.handleTypeChange = this.handleTypeChange.bind(this);\n    }\n\n    handleTypeChange(selected) {\n        let thePvp;\n        let theAi1;\n        if (selected === \"pvp\") {\n            thePvp = true;\n            theAi1 = false;\n        } else if (selected === \"aip1\") {\n            thePvp = false;\n            theAi1 = true;\n        } else if (selected === \"aip1\") {\n            thePvp = false;\n            theAi1 = false;\n        }\n        this.setState({\n            mode: selected,\n            isPvp: thePvp,\n            isAi1: theAi1\n        });\n    }\n\n    render() {\n        return (\n            <div className=\"App\">\n                <h1>Connect 4</h1>\n                <GameType option={this.state.mode} onTypeChange={this.handleTypeChange}/>\n                <Board isPvp={this.state.isPvp} isAi1={this.state.isAi1}/>\n            </div>\n        );\n    }\n}\n\n\n\n\n\n\nfunction calculateWinner(board) {\n    // check columns\n    for (let r = 3; r < 6; r++) {\n        for (let c = 0; c < 7; c++) {\n            if (board[r][c]) {\n                if (board[r][c] === board[r - 1][c] &&\n                    board[r][c] === board[r - 2][c] &&\n                    board[r][c] === board[r - 3][c]) {\n                    return board[r][c];\n                }\n            }\n        }\n    }\n    // check rows\n    for (let r = 0; r < 6; r++) {\n        for (let c = 0; c < 4; c++) {\n            if (board[r][c]) {\n                if (board[r][c] === board[r][c + 1] &&\n                    board[r][c] === board[r][c + 2] &&\n                    board[r][c] === board[r][c + 3]) {\n                    return board[r][c];\n                }\n            }\n        }\n    }\n    // diagonal right\n    for (let r = 3; r < 6; r++) {\n      for (let c = 0; c < 4; c++) {\n        if (board[r][c]) {\n          if (board[r][c] === board[r - 1][c + 1] &&\n              board[r][c] === board[r - 2][c + 2] &&\n              board[r][c] === board[r - 3][c + 3]) {\n            return board[r][c];\n          }\n        }\n      }\n    }\n    // diagonal left\n    for (let r = 3; r < 6; r++) {\n      for (let c = 3; c < 7; c++) {\n        if (board[r][c]) {\n          if (board[r][c] === board[r - 1][c - 1] &&\n              board[r][c] === board[r - 2][c - 2] &&\n              board[r][c] === board[r - 3][c - 3]) {\n            return board[r][c];\n          }\n        }\n      }\n    }\n    // draw\n    for (let r = 0; r < 6; r++) {\n        for (let c = 0; c < 7; c++) {\n            if (!board[r][c]){\n                return null;\n            }\n        }\n    }\n    return \"draw\";\n}\n\n\nexport default App;\n\n"]},"metadata":{},"sourceType":"module"}